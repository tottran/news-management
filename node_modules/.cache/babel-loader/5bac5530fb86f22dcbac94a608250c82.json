{"ast":null,"code":"'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n  inherits = require('inherits'),\n  JSON3 = require('json3'),\n  utils = require('./utils/event'),\n  IframeTransport = require('./transport/iframe'),\n  InfoReceiverIframe = require('./info-iframe-receiver');\nvar debug = function () {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n  var go = function () {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n    ifr.once('message', function (msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n        var info = d[0],\n          rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n    ifr.once('close', function () {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\ninherits(InfoIframe, EventEmitter);\nInfoIframe.enabled = function () {\n  return IframeTransport.enabled();\n};\nInfoIframe.prototype.close = function () {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\nmodule.exports = InfoIframe;","map":{"version":3,"names":["EventEmitter","require","inherits","JSON3","utils","IframeTransport","InfoReceiverIframe","debug","process","env","NODE_ENV","InfoIframe","baseUrl","url","self","call","go","ifr","transportName","once","msg","d","parse","e","emit","close","info","rtt","global","document","body","attachEvent","enabled","prototype","removeAllListeners","module","exports"],"sources":["/Users/tottran/Documents/Bitbucket/toithietkephp/node_modules/react-dev-utils/node_modules/sockjs-client/lib/info-iframe.js"],"sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,YAAY,GAAGC,OAAO,CAAC,QAAQ,CAAC,CAACD,YAAY;EAC7CE,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;EAC9BE,KAAK,GAAGF,OAAO,CAAC,OAAO,CAAC;EACxBG,KAAK,GAAGH,OAAO,CAAC,eAAe,CAAC;EAChCI,eAAe,GAAGJ,OAAO,CAAC,oBAAoB,CAAC;EAC/CK,kBAAkB,GAAGL,OAAO,CAAC,wBAAwB,CAAC;AAG1D,IAAIM,KAAK,GAAG,YAAW,CAAC,CAAC;AACzB,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;EACzCH,KAAK,GAAGN,OAAO,CAAC,OAAO,CAAC,CAAC,2BAA2B,CAAC;AACvD;AAEA,SAASU,UAAU,CAACC,OAAO,EAAEC,GAAG,EAAE;EAChC,IAAIC,IAAI,GAAG,IAAI;EACfd,YAAY,CAACe,IAAI,CAAC,IAAI,CAAC;EAEvB,IAAIC,EAAE,GAAG,YAAW;IAClB,IAAIC,GAAG,GAAGH,IAAI,CAACG,GAAG,GAAG,IAAIZ,eAAe,CAACC,kBAAkB,CAACY,aAAa,EAAEL,GAAG,EAAED,OAAO,CAAC;IAExFK,GAAG,CAACE,IAAI,CAAC,SAAS,EAAE,UAASC,GAAG,EAAE;MAChC,IAAIA,GAAG,EAAE;QACP,IAAIC,CAAC;QACL,IAAI;UACFA,CAAC,GAAGlB,KAAK,CAACmB,KAAK,CAACF,GAAG,CAAC;QACtB,CAAC,CAAC,OAAOG,CAAC,EAAE;UACVhB,KAAK,CAAC,UAAU,EAAEa,GAAG,CAAC;UACtBN,IAAI,CAACU,IAAI,CAAC,QAAQ,CAAC;UACnBV,IAAI,CAACW,KAAK,EAAE;UACZ;QACF;QAEA,IAAIC,IAAI,GAAGL,CAAC,CAAC,CAAC,CAAC;UAAEM,GAAG,GAAGN,CAAC,CAAC,CAAC,CAAC;QAC3BP,IAAI,CAACU,IAAI,CAAC,QAAQ,EAAEE,IAAI,EAAEC,GAAG,CAAC;MAChC;MACAb,IAAI,CAACW,KAAK,EAAE;IACd,CAAC,CAAC;IAEFR,GAAG,CAACE,IAAI,CAAC,OAAO,EAAE,YAAW;MAC3BL,IAAI,CAACU,IAAI,CAAC,QAAQ,CAAC;MACnBV,IAAI,CAACW,KAAK,EAAE;IACd,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,IAAI,CAACG,MAAM,CAACC,QAAQ,CAACC,IAAI,EAAE;IACzB1B,KAAK,CAAC2B,WAAW,CAAC,MAAM,EAAEf,EAAE,CAAC;EAC/B,CAAC,MAAM;IACLA,EAAE,EAAE;EACN;AACF;AAEAd,QAAQ,CAACS,UAAU,EAAEX,YAAY,CAAC;AAElCW,UAAU,CAACqB,OAAO,GAAG,YAAW;EAC9B,OAAO3B,eAAe,CAAC2B,OAAO,EAAE;AAClC,CAAC;AAEDrB,UAAU,CAACsB,SAAS,CAACR,KAAK,GAAG,YAAW;EACtC,IAAI,IAAI,CAACR,GAAG,EAAE;IACZ,IAAI,CAACA,GAAG,CAACQ,KAAK,EAAE;EAClB;EACA,IAAI,CAACS,kBAAkB,EAAE;EACzB,IAAI,CAACjB,GAAG,GAAG,IAAI;AACjB,CAAC;AAEDkB,MAAM,CAACC,OAAO,GAAGzB,UAAU"},"metadata":{},"sourceType":"script"}